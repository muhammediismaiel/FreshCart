<section class="max-w-screen-xl mx-auto p-4 overflow-hidden">
  <h1 class="text-2xl font-bold mb-4 text-center text-white">Product Categories</h1>

  @if (isLoadingCategories) {
    <div class="flex justify-center items-center h-40">
      <div class="w-10 h-10 border-4 border-green-500 border-t-transparent rounded-full animate-spin"></div>
    </div>
  } @else {
    <owl-carousel-o [options]="customOptions">
      @for (category of Categories; track $index) {
        <ng-template carouselSlide [id]="category.id">
          <img
            [src]="category.image"
            [alt]="category.name"
            class="h-40 object-cover object-top"
          />
          <h3 class="text-lg font-semibold text-center mt-2 text-white">
            {{ category.name }}
          </h3>
        </ng-template>
      }
    </owl-carousel-o>
  }
</section>

<section class="max-w-screen-xl mx-auto p-4 overflow-hidden">
  <h1 class="text-2xl font-bold mb-4 text-center text-white">Our Products</h1>

  @if (isLoadingProducts) {
    <div class="flex justify-center items-center h-40">
      <div class="w-10 h-10 border-4 border-green-500 border-t-transparent rounded-full animate-spin"></div>
    </div>
  } @else {
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-8">
      @for (product of products; track $index) {
        <div
          class="group bg-white rounded-lg shadow p-4 flex flex-col items-center relative overflow-hidden"
        >
          <div class="relative">
            <a [routerLink]="['/productdetails', product._id]">
              <img
                [src]="product.imageCover"
                [alt]="product.title"
                class="w-32 h-32 object-cover mb-4 rounded transition-transform duration-300 group-hover:scale-105 cursor-pointer"
              />
            </a>

            <button
                        (click)="addProductToCart(product.id)"

              class="absolute bottom-2 cursor-pointer left-1/2 -translate-x-1/2 opacity-0 translate-y-6 transition-all duration-500 group-hover:translate-y-0 group-hover:opacity-100 bg-green-600 text-white py-2 px-6 rounded-lg hover:bg-green-700 whitespace-nowrap"
            >
              Add to Cart
            </button>
          </div>
          <h2 class="text-lg font-semibold mt-2">{{ product.title }}</h2>
          <p class="text-gray-500">{{ product.price }}</p>
        </div>
      }
    </div>
  }
</section>
