import{a as V}from"./chunk-JEYU4BB5.js";import{a as L}from"./chunk-TQL5B64P.js";import"./chunk-Q6L3W752.js";import"./chunk-CTLRNFRS.js";import{Ab as x,Db as h,Eb as D,Jb as u,Kb as d,Oa as v,Ra as c,Rb as r,Sb as T,Tb as _,aa as g,bb as S,fa as s,ga as m,ha as C,ia as E,pb as f,qb as b,rb as y,sb as w,tb as k,yb as e,zb as n}from"./chunk-VB2YUMDK.js";function P(o,i){o&1&&(e(0,"div",0),x(1,"i",2),n())}function j(o,i){if(o&1){let t=h();e(0,"tr",13)(1,"td",17),x(2,"img",18),n(),e(3,"td",19),r(4),n(),e(5,"td",20)(6,"div",21)(7,"button",22),u("click",function(){let a=s(t).$implicit,p=d(3);return m(p.updateCount(a.product._id,a.count-1))}),C(),e(8,"svg",23),x(9,"path",24),n()(),E(),e(10,"span",25),r(11),n(),e(12,"button",26),u("click",function(){let a=s(t).$implicit,p=d(3);return m(p.updateCount(a.product._id,a.count+1))}),C(),e(13,"svg",27),x(14,"path",28),n()()()(),E(),e(15,"td",19),r(16),n(),e(17,"td",20)(18,"button",29),u("click",function(){let a=s(t).$implicit,p=d(3);return m(p.deleteProduct(a.product._id))}),r(19,"Remove"),n()()()}if(o&2){let t=i.$implicit;c(2),D("src",t.product.imageCover,v)("alt",t.product.title),c(2),_(" ",t.product.title," "),c(7),T(t.count),c(5),_(" ",t.price," EGP ")}}function O(o,i){if(o&1){let t=h();e(0,"p",5),r(1," Total Price : "),e(2,"span",6),r(3),n()(),e(4,"div",7)(5,"table",8)(6,"thead",9)(7,"tr")(8,"th",10)(9,"span",11),r(10,"Image"),n()(),e(11,"th",12),r(12,"Product"),n(),e(13,"th",12),r(14,"Qty"),n(),e(15,"th",12),r(16,"Price"),n(),e(17,"th",12),r(18,"Action"),n()()(),e(19,"tbody"),w(20,j,20,5,"tr",13,y),n()()(),e(22,"div",14)(23,"button",15),u("click",function(){s(t);let a=d(2);return m(a.clearCart())}),r(24,"Clear Cart"),n(),e(25,"button",16),u("click",function(){s(t);let a=d(2);return m(a.checkOutSession(a.cartData==null?null:a.cartData.cartId))}),r(26,"CheckOut"),n()()}if(o&2){let t=d(2);c(3),_("",t.cartData==null||t.cartData.data==null?null:t.cartData.data.totalCartPrice," EGP"),c(17),k(t.cartData==null||t.cartData.data==null?null:t.cartData.data.products)}}function M(o,i){o&1&&(e(0,"p",4),r(1,"No Items in Cart"),n())}function F(o,i){if(o&1&&(e(0,"section",1)(1,"h1",3),r(2,"\u{1F6D2} Cart Page"),n(),f(3,O,27,1)(4,M,2,0,"p",4),n()),o&2){let t=d();c(3),b(t.cartData!=null&&t.cartData.numOfCartItems?3:4)}}var I=class o{cartData=null;isLoading=!1;isUpdateLoading=!1;cartService=g(V);toaster=g(L);ngOnInit(){this.getCartData()}getCartData(){this.isLoading=!0,this.cartService.getCart().subscribe({next:i=>{this.isLoading=!1,this.cartData=i},error:i=>{this.isLoading=!1,this.toaster.error(i.error.message)}})}updateCount(i,t){this.cartService.updateProductCount(i,t).subscribe({next:l=>{console.log(l),this.cartData=l},error:l=>{this.toaster.error(l.error.message),this.isUpdateLoading=!1}})}deleteProduct(i){this.cartService.clearSpecificProduct(i).subscribe({error:t=>{this.toaster.error(t.error.message)},next:t=>{console.log(t),this.cartData=t}})}clearCart(){this.cartService.clearCart().subscribe({error:i=>{this.toaster.error(i.error.message)},next:i=>{console.log(i),this.cartData=null}})}checkOutSession(i){this.cartService.checkOutSession(i).subscribe({error:t=>{this.toaster.error(t.error.message)},next:t=>{console.log(t),window.location.href=t.session.url}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=S({type:o,selectors:[["app-cart"]],decls:2,vars:1,consts:[[1,"flex","justify-center","items-center","h-64"],[1,"max-w-6xl","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow-lg"],[1,"fa","fa-spinner","fa-spin","text-4xl","text-green-600"],[1,"text-3xl","font-bold","text-green-600","mb-6","text-center"],[1,"text-red-500","text-center","text-lg","font-medium"],[1,"text-green-600","font-semibold","mb-4","text-lg"],[1,"text-gray-800"],[1,"relative","overflow-x-auto","shadow-md","rounded-lg"],[1,"w-full","text-sm","text-left","text-gray-600"],[1,"text-xs","uppercase","bg-gray-100","text-gray-700"],["scope","col",1,"px-16","py-3"],[1,"sr-only"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","hover:bg-gray-50"],[1,"flex","justify-between","mt-6"],["type","button",1,"btn-red","px-6","py-2",3,"click"],["type","button",1,"btn-green","px-6","py-2",3,"click"],[1,"p-4"],[1,"w-20","h-20","object-cover","rounded-lg","border",3,"src","alt"],[1,"px-6","py-4","font-semibold","text-gray-900"],[1,"px-6","py-4"],[1,"flex","items-center"],["type","button",1,"inline-flex","items-center","justify-center","p-1","me-3","h-7","w-7","text-gray-500","bg-white","border","border-gray-300","rounded-full","hover:bg-gray-100","focus:ring-2","focus:ring-green-300",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 18 2",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","d","M1 1h16"],[1,"font-semibold","text-gray-800"],["type","button",1,"inline-flex","items-center","justify-center","h-7","w-7","p-1","ms-3","text-gray-500","bg-white","border","border-gray-300","rounded-full","hover:bg-gray-100","focus:ring-2","focus:ring-green-300",3,"click"],["fill","none","stroke","currentColor","stroke-width","2","viewBox","0 0 18 18",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","d","M9 1v16M1 9h16"],[1,"btn-red",3,"click"]],template:function(t,l){t&1&&f(0,P,2,0,"div",0)(1,F,5,1,"section",1),t&2&&b(l.isLoading?0:1)},encapsulation:2})};export{I as Cart};
