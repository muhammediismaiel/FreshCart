import{a as E}from"./chunk-UJJBUMAF.js";import{a as L,b as p,c as G,d as k,e as T,f as w,g as q,i as F,j as N,k as R,l as M}from"./chunk-CUATMJMT.js";import{a as _}from"./chunk-TQL5B64P.js";import"./chunk-Q6L3W752.js";import{c as S,d as y}from"./chunk-ZP25FYFI.js";import"./chunk-CTLRNFRS.js";import{Ib as x,Kb as g,Pb as f,Ra as o,Rb as a,Sb as h,Wb as C,Ya as c,aa as b,bb as v,pb as u,qb as m,ub as s,vb as i,wb as l,xb as d}from"./chunk-VB2YUMDK.js";var A=()=>["/register"],D=()=>["/reset-password"];function P(r,n){if(r&1&&(i(0,"p",6),a(1),l()),r&2){let t=g();o(),h(t.emailErrorMsg)}}function j(r,n){if(r&1&&(i(0,"p",6),a(1),l()),r&2){let t=g();o(),h(t.passwordErrorMsg)}}function V(r,n){r&1&&d(0,"span",10)}function Z(r,n){r&1&&a(0," Submit ")}var I=class r{constructor(n,t){this.toastr=n;this.router=t}isLoading=!1;authService=b(E);loginGroup=new T({email:new w("",[p.required,p.email]),password:new w("",[p.required,p.pattern(/^[A-Z].{5,}/)])});handleSubmit(){this.loginGroup.markAllAsTouched(),!this.loginGroup.invalid&&(this.isLoading=!0,this.authService.login(this.loginGroup.value).subscribe({next:n=>{this.isLoading=!1,this.toastr.success("Registration successful!","Success");let t=n.token;localStorage.setItem("token",t),this.authService.decodeToken(t),this.loginGroup.reset(),this.router.navigate(["/home"])},error:n=>{this.isLoading=!1,n?.error?.message&&this.toastr.error(n.error.message,"Error")}}))}get emailController(){return this.loginGroup.get("email")}get passwordController(){return this.loginGroup.get("password")}get emailErrorMsg(){if(this.emailController?.touched&&this.emailController?.errors){if(this.emailController?.getError("required"))return"email is required";if(this.emailController?.getError("email"))return"email must be a valid email address"}return""}get passwordErrorMsg(){if(this.passwordController?.touched&&this.passwordController?.errors){if(this.passwordController?.getError("required"))return"password is required";if(this.passwordController?.getError("pattern"))return"password must start with a capital letter and be at least 6 characters long"}return""}static \u0275fac=function(t){return new(t||r)(c(_),c(S))};static \u0275cmp=v({type:r,selectors:[["app-login"]],decls:24,vars:13,consts:[[1,"max-w-md","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-green-600"],[1,"mt-6","space-y-6",3,"ngSubmit","formGroup"],[1,"relative"],["formControlName","email","type","email","id","email","placeholder"," ","required","",1,"peer","w-full","border-b-2","border-gray-300","text-gray-900","focus:border-green-600","focus:ring-0","p-3","outline-none","transition"],["for","email",1,"absolute","left-3","top-1","text-gray-500","text-sm","transition-all","duration-300","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-focus:top-0","peer-focus:text-green-600","peer-focus:text-sm"],[1,"text-red-500","text-sm","mt-1"],["formControlName","password","type","password","id","password","placeholder"," ","required","",1,"peer","w-full","border-b-2","border-gray-300","text-gray-900","focus:border-green-600","focus:ring-0","p-3","outline-none","transition"],["for","password",1,"absolute","left-3","top-1","text-gray-500","text-sm","transition-all","duration-300","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-focus:top-0","peer-focus:text-green-600","peer-focus:text-sm"],["type","submit",1,"cursor-pointer","w-full","bg-green-600","text-white","py-3","rounded-lg","hover:bg-green-700","transition","disabled:opacity-50","flex","items-center","justify-center",3,"disabled"],[1,"animate-spin","inline-block","w-5","h-5","border-2","border-white","border-t-transparent","rounded-full"],[1,"text-green-600","hover:underline",3,"routerLink"],[1,"text-green-600","hover:underline","mt-4",3,"routerLink"]],template:function(t,e){t&1&&(i(0,"section",0)(1,"h2",1),a(2,"Login"),l(),i(3,"form",2),x("ngSubmit",function(){return e.handleSubmit()}),i(4,"div",3),d(5,"input",4),i(6,"label",5),a(7," Email "),l(),u(8,P,2,1,"p",6),l(),i(9,"div",3),d(10,"input",7),i(11,"label",8),a(12," Password "),l(),u(13,j,2,1,"p",6),l(),i(14,"button",9),u(15,V,1,0,"span",10)(16,Z,1,0),l(),a(17," don't have an account? "),i(18,"a",11),a(19,"Register"),l(),d(20,"br"),a(21," forget password? "),i(22,"a",12),a(23,"Reset Password"),l()()()),t&2&&(o(3),s("formGroup",e.loginGroup),o(5),m(e.emailController!=null&&e.emailController.touched&&(e.emailController!=null&&e.emailController.errors)?8:-1),o(2),f("!border-b-red-500",(e.passwordController==null?null:e.passwordController.touched)&&(e.passwordController==null?null:e.passwordController.errors)),o(),f("!text-red-500",(e.passwordController==null?null:e.passwordController.touched)&&(e.passwordController==null?null:e.passwordController.errors)),o(2),m(e.passwordController!=null&&e.passwordController.touched&&(e.passwordController!=null&&e.passwordController.errors)?13:-1),o(),s("disabled",e.loginGroup.invalid||e.isLoading),o(),m(e.isLoading?15:16),o(3),s("routerLink",C(11,A)),o(4),s("routerLink",C(12,D)))},dependencies:[M,q,L,G,k,R,F,N,y],encapsulation:2})};export{I as LoginComponent};
