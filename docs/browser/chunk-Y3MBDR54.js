import{a as y}from"./chunk-UJJBUMAF.js";import{a as S,b as s,c as _,d as P,e as R,f as g,g as G,i as q,j as T,l as M}from"./chunk-CUATMJMT.js";import{a as E}from"./chunk-TQL5B64P.js";import"./chunk-Q6L3W752.js";import{c as b,d as v}from"./chunk-ZP25FYFI.js";import"./chunk-CTLRNFRS.js";import{Ib as w,Kb as m,Ra as l,Rb as a,Sb as c,Wb as x,Ya as h,bb as C,pb as p,qb as d,ub as f,vb as t,wb as o,xb as u}from"./chunk-VB2YUMDK.js";var L=()=>["/login"];function I(r,i){if(r&1&&(t(0,"p",6),a(1),o()),r&2){let n=m();l(),c(n.nameErrorMsg)}}function k(r,i){if(r&1&&(t(0,"p",6),a(1),o()),r&2){let n=m();l(),c(n.emailErrorMsg)}}function A(r,i){if(r&1&&(t(0,"p",6),a(1),o()),r&2){let n=m();l(),c(n.passwordErrorMsg)}}function F(r,i){if(r&1&&(t(0,"p",6),a(1),o()),r&2){let n=m();l(),c(n.rePasswordErrorMsg)}}function D(r,i){if(r&1&&(t(0,"p",6),a(1),o()),r&2){let n=m();l(),c(n.phoneErrorMsg)}}function j(r,i){r&1&&u(0,"span",16)}function V(r,i){r&1&&a(0," Submit ")}var N=class r{constructor(i,n,e){this.authService=i;this.toastr=n;this.router=e}isLoading=!1;registerGroup=new R({name:new g("",[s.required,s.minLength(3),s.maxLength(20)]),email:new g("",[s.required,s.email]),password:new g("",[s.required,s.pattern(/^[A-Z].{5,}/)]),rePassword:new g("",[s.required,s.pattern(/^[A-Z].{5,}/)]),phone:new g("",[s.required,s.pattern(/^01[0125][0-9]{8}$/)])});handleSubmit(){this.registerGroup.markAllAsTouched(),!this.registerGroup.invalid&&(this.isLoading=!0,this.authService.register(this.registerGroup.value).subscribe({next:i=>{this.isLoading=!1,this.toastr.success("Registration successful!","Success"),console.log("Registration successful:",i);let n=i.token;localStorage.setItem("token",n),this.authService.decodeToken(n),this.registerGroup.reset(),this.router.navigate(["/home"])},error:i=>{this.isLoading=!1,i?.error?.message&&this.toastr.error(i.error.message,"Error")}}))}get nameController(){return this.registerGroup.get("name")}get emailController(){return this.registerGroup.get("email")}get passwordController(){return this.registerGroup.get("password")}get rePasswordController(){return this.registerGroup.get("rePassword")}get phoneController(){return this.registerGroup.get("phone")}get emailErrorMsg(){if(this.emailController?.touched&&this.emailController?.errors){if(this.emailController?.getError("required"))return"email is required";if(this.emailController?.getError("email"))return"email must be a valid email address"}return""}get passwordErrorMsg(){if(this.passwordController?.touched&&this.passwordController?.errors){if(this.passwordController?.getError("required"))return"password is required";if(this.passwordController?.getError("pattern"))return"password must start with a capital letter and be at least 6 characters long"}return""}get rePasswordErrorMsg(){if(this.rePasswordController?.touched&&this.rePasswordController?.errors){if(this.rePasswordController?.getError("required"))return"rePassword is required";if(this.rePasswordController?.getError("pattern"))return"rePassword must start with a capital letter and be at least 6 characters long"}return""}get phoneErrorMsg(){if(this.phoneController?.touched&&this.phoneController?.errors){if(this.phoneController?.getError("required"))return"phone is required";if(this.phoneController?.getError("pattern"))return"phone must be a valid Egyptian phone number"}return""}get nameErrorMsg(){if(this.nameController?.touched&&this.nameController?.errors){if(this.nameController?.getError("required"))return"name is required";if(this.nameController?.getError("minlength"))return"name must be at least 3 characters";if(this.nameController?.getError("maxlength"))return"name cannot be more than 20 characters"}return""}static \u0275fac=function(n){return new(n||r)(h(y),h(E),h(b))};static \u0275cmp=C({type:r,selectors:[["app-register"]],decls:35,vars:10,consts:[[1,"max-w-md","mx-auto","mt-10","bg-white","p-8","rounded-xl","shadow-lg"],[1,"text-2xl","font-bold","text-center","text-green-600"],[1,"mt-6","space-y-6",3,"ngSubmit","formGroup"],[1,"relative"],["formControlName","name","type","text","id","name","placeholder"," ",1,"peer","w-full","border-b-2","border-gray-300","text-gray-900","focus:border-green-600","focus:ring-0","p-3","outline-none","transition"],["for","name",1,"absolute","left-3","top-1","text-gray-500","text-sm","transition-all","duration-300","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-focus:top-0","peer-focus:text-green-600","peer-focus:text-sm"],[1,"text-red-500","text-sm","mt-1"],["formControlName","email","type","email","id","email","placeholder"," ",1,"peer","w-full","border-b-2","border-gray-300","text-gray-900","focus:border-green-600","focus:ring-0","p-3","outline-none","transition"],["for","email",1,"absolute","left-3","top-1","text-gray-500","text-sm","transition-all","duration-300","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-focus:top-0","peer-focus:text-green-600","peer-focus:text-sm"],["formControlName","password","type","password","id","password","placeholder"," ",1,"peer","w-full","border-b-2","border-gray-300","text-gray-900","focus:border-green-600","focus:ring-0","p-3","outline-none","transition"],["for","password",1,"absolute","left-3","top-1","text-gray-500","text-sm","transition-all","duration-300","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-focus:top-0","peer-focus:text-green-600","peer-focus:text-sm"],["formControlName","rePassword","type","password","id","rePassword","placeholder"," ",1,"peer","w-full","border-b-2","border-gray-300","text-gray-900","focus:border-green-600","focus:ring-0","p-3","outline-none","transition"],["for","rePassword",1,"absolute","left-3","top-1","text-gray-500","text-sm","transition-all","duration-300","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-focus:top-0","peer-focus:text-green-600","peer-focus:text-sm"],["formControlName","phone","type","text","id","phone","placeholder"," ",1,"peer","w-full","border-b-2","border-gray-300","text-gray-900","focus:border-green-600","focus:ring-0","p-3","outline-none","transition"],["for","phone",1,"absolute","left-3","top-1","text-gray-500","text-sm","transition-all","duration-300","peer-placeholder-shown:top-3","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-focus:top-0","peer-focus:text-green-600","peer-focus:text-sm"],["type","submit",1,"cursor-pointer","w-full","bg-green-600","text-white","py-3","rounded-lg","hover:bg-green-700","transition","disabled:opacity-50","flex","items-center","justify-center",3,"disabled"],[1,"animate-spin","inline-block","w-5","h-5","border-2","border-white","border-t-transparent","rounded-full"],[1,"text-green-600","hover:underline",3,"routerLink"]],template:function(n,e){n&1&&(t(0,"section",0)(1,"h1",1),a(2,"Register"),o(),t(3,"form",2),w("ngSubmit",function(){return e.handleSubmit()}),t(4,"div",3),u(5,"input",4),t(6,"label",5),a(7," Name "),o(),p(8,I,2,1,"p",6),o(),t(9,"div",3),u(10,"input",7),t(11,"label",8),a(12," Email "),o(),p(13,k,2,1,"p",6),o(),t(14,"div",3),u(15,"input",9),t(16,"label",10),a(17," Password "),o(),p(18,A,2,1,"p",6),o(),t(19,"div",3),u(20,"input",11),t(21,"label",12),a(22," Re-Password "),o(),p(23,F,2,1,"p",6),o(),t(24,"div",3),u(25,"input",13),t(26,"label",14),a(27," Phone "),o(),p(28,D,2,1,"p",6),o(),t(29,"button",15),p(30,j,1,0,"span",16)(31,V,1,0),o(),a(32," you have an account? "),t(33,"a",17),a(34,"Login"),o()()()),n&2&&(l(3),f("formGroup",e.registerGroup),l(5),d(e.nameController!=null&&e.nameController.touched&&(e.nameController!=null&&e.nameController.errors)?8:-1),l(5),d(e.emailController!=null&&e.emailController.touched&&(e.emailController!=null&&e.emailController.errors)?13:-1),l(5),d(e.passwordController!=null&&e.passwordController.touched&&(e.passwordController!=null&&e.passwordController.errors)?18:-1),l(5),d(e.rePasswordController!=null&&e.rePasswordController.touched&&(e.rePasswordController!=null&&e.rePasswordController.errors)?23:-1),l(5),d(e.phoneController!=null&&e.phoneController.touched&&(e.phoneController!=null&&e.phoneController.errors)?28:-1),l(),f("disabled",e.registerGroup.invalid||e.isLoading),l(),d(e.isLoading?30:31),l(3),f("routerLink",x(9,L)))},dependencies:[M,G,S,_,P,q,T,v],encapsulation:2})};export{N as RegisterComponent};
